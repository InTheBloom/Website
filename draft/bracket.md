## はじめに
「バランスの取れた括弧列」は競技プログラミングにおいてしばしば問題に出る概念であり、
それに関連する問題群は知識があるかないかだけでも難易度が大幅に変わることがあります。

本稿では、私がバランスの取れた括弧列について知っている情報を整理して記しておこうと思います。

## 注意
本稿はあくまで防備録としての毛色が強く、正確性を保証するものではありません。
最後の章に参考文献を載せておくので、そちらを合わせて確認することを強く勧めます。

間違い等ありましたら[Twitter](https://twitter.com/UU9782wsEdANDhp)までお願いします。

## 想定読者
競技プログラミングを始めたばかりの人、AtCoderでのレーティングが0~600程の人

## 定義
「バランスの取れた括弧列」は同値な定義がいくつか存在します。
どの定義を軸に考えるかによって体感難易度が大幅に変わる場合もあります。
以下では、覚えておいたほうが良いと思ういくつかの定義を紹介します。

### 定義1
バランスの取れた括弧列は、以下のいずれかのルールで構成される。
1. 空文字列
1. バランスの取れた括弧列Aが存在し、`(` A `)`をこの順に結合した文字列
1. バランスの取れた括弧列A, Bが存在し、A, Bをこの順に結合した文字列

<em>解説</em>

定義を一意にするためには「構成される」という文言が大切なようです。
この定義はざっくり言うと、
上の2,3の操作を繰り返して構成することができる文字列をバランスの取れた括弧列と呼ぶということです。

### 定義2
バランスの取れた括弧列とは、以下の条件を満たすものである。

- 連続部分文字列`()`を削除することを0回以上繰り返して空文字列にすることができる

<em>解説</em>

与えられた文字列がバランスが取れているかどうかを簡単に確認できるのが魅力と言えます。
そして、私達の実感に最も合っている定義だと思います。

### 定義3
長さNの文字列Sがバランスの取れた文字列であるとは、以下の条件を満たすことをいう。

1. Sは`(`または`)`のみで構成されていて、どちらも同数含まれている
1. 任意のi (1<=i<=N)に対して、i文字目の時点で出現した`(`の数が`)`の数以上である。

<em>解説</em>

この定義が上2つと同値であるというのは非自明に感じる人も多いかもしれません。(私はそうです)
これを用いると、与えられた文字列がバランスが取れているかどうかを簡単にO(N)でチェックできます。

#### 定義における注意点
バランスの取れた括弧列を矛盾なく一意に定義するのは難しいです。
これは、バランスの取れた括弧列自身からバランスの取れた括弧列を定義しているという点に基づいています。
なので、「「バランスの取れた括弧列」とは、以下の条件を満たすものである。」という形の定義は基本的に避けたほうが無難だと思います。
より詳細な議論が知りたい方は参考文献<a href="#ref1">\[1\]</a>を参照してください

## 参考文献

\[1\] not522. 競プロでよくある「バランスのとれた括弧列」の定義が壊れがちな話. notブログ. 2020-5-11. <a href="https://not522.hatenablog.com/entry/2020/05/11/074644" id="ref1">https://not522.hatenablog.com/entry/2020/05/11/074644</a>, (参照2023-5-27)
