<!DOCTYPE html>
<html lang="ja" prefix="og: http://ogp.me/ns#">
    <head>
        <title>ABC291 D問題をしばく - InTheDayDream</title> <!-- ページのタイトル書いてね -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=devicewidth, initial-scale=1">
        <base href="../">
        <script> let base = ''; let tmp = [...window.location.href]; let i = 0; let str = 'articles'; for (; ; i++) { let flag = 0; for (let j = 0; str.length > j; j++) { if (str[j] != tmp[i + j]) { flag = 1; break; } } if (flag == 0) { break; } } let roop = tmp.length - i; for (let j = 0; roop > j; j++) { tmp.pop(); } base = tmp.join(''); let a = document.getElementsByTagName("base"); a[0].setAttribute('href', base); </script>
        <link rel="stylesheet" href="default.css">
        <script src="headliner.js"></script>
        <script src="highlight.js"></script>
        <link rel="icon" href="https://res.cloudinary.com/dqoqdn2sk/image/upload/v1673863461/pictures/favicon.png.png">
        <link rel="apple-touch-icon" href="https://res.cloudinary.com/dqoqdn2sk/image/upload/v1673863461/pictures/favicon.png.png">
        <meta name="description" content="ABC291のD問題の解説です。"> <!-- ページの説明書いてね -->

        <!-- 以下SNSのカード設定 -->
        <meta property="og:url" content="https://inthebloom.github.io/articles/abc291d.html"> <!-- ページのURL書いてね -->
        <meta property="og:title" content="ABC291D問題をしばく - InTheDayDream"> <!-- ページタイトル書いてね -->
        <meta property="og:description" content="ABC291のD問題の解説です。"> <!-- ページの説明書いてね -->
        <meta property="og:type" content="article"> <!-- コンテンツタイプ(Website or article) -->
        <meta property="og:image" content=""> <!-- 表示される画像(絶対パス)書いてね -->
        <!-- Twitter用の設定 -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@UU9782wsEdANDhp">
    </head>

    <body>
        <header>
            <a href="home.html"><img src="https://res.cloudinary.com/dqoqdn2sk/image/upload/v1675069885/pictures/sitelogo_p1inzg.png" class="sitelogo" alt="sitelogo"></a>
        </header>

        <div class="outer">
            <aside>
                <div id="table-of-content">
                </div>
            </aside>
            <div class="main">
                <nav>
                    <ol class="crumbs"> <!-- ホームからのパンくずリスト -->
                        <li class="crumb"><a href="home.html">Home</a></li>
                        <li class="crumb">ABC291 D問題をしばく</li> <!-- 現在のページタイトル書いてね -->
                    </ol>
                </nav>
                <h1>ABC291 D問題をしばく</h1> <!-- 一番でかい見出し書いてね -->

                <div class="date"> <!-- 記事作成日と更新日書いてね -->
                    <p>書いた日: 2023/3/4</p>
                    <p>最終更新日: N/A</p>
                </div>

                <h2>はじめに</h2> <!-- ここから記事本編 -->
                    <p>先日、<a href="">ABC291</a>がありましたが、私はコンテスト中にD問題を解くことができませんでした。数日たち、ようやくACすることができたのでまとめることにします。</p>
                <h2>問題紹介</h2>
                    <p>問題文は以下の通りです。</p>
                    <img src="" alt="問題文">
                    <p>問題文をざっくり要約します。N枚のカードがあり、それぞれ表と裏に数字が書かれています。これらのカードを、どの部分も隣合う数字が相異なるように好きな枚数をひっくり返すとき、ひっくり返す方法は全部で何通りあるかを求める問題です。</p>
                <h2>解法</h2>
                    <p>結論から言うと、二次元の動的計画法で解くことができます。</p>
                    <p>ただし、その前にある程度この問題について考えてみて、動的計画法をできるだけ自然に導入していきます。</p>
                    <p>まず、全探索を考えてみます。(上に挙げたような条件を考えずに)単に好きな枚数カードをひっくり返す方法が何通り存在するのかを考えます。このとき、各カードは表か裏の2通りの状態を取ることができるため、全体としては2<sup>N</sup>通りになります。</p>
                    <p>この説明はすでに結果を知っている人向けになるので、もう少し違う例を挙げてみます。まずカード1枚のとき、明らかに表と裏の2通りになります。ここに新しく一枚カードを追加してみることにします。すると、一枚目のカードが表のときに、新しく追加した方のカードは表と裏の2通りを取ることができます。一枚目が裏のときにも同様のことが成り立つので、全体としてはありうる可能性が2倍になったと考えることができます。</p>
                    <p>これは2枚目以降を追加したときも同様で、今までの全体の場合に加えて新しい一枚の表裏が加わるため、一枚増えるごとに2倍されていくのです。したがって、カードがN枚のときには、取りうるカードの表裏の状態は2<sup>N</sup>通りになります。</p>
                    <p>以上より、bit全探索等の手法を用いて全探索することができそうです。しかし、この方法では計算量が非常に多くなってしまうため、実行制限時間に間に合わせるのは不可能です。</p>
                    <h3>問題を単純化して考える</h3>
                        <p>さて、ここで「動的計画法により解くことができます」といい、複雑(に見える)遷移式を提示してもいいのですが、それでは私を含めた殆どの初学者のためになりません。そこで、まずは問題を単純化して考えていきます。</p>
                        <p>カードが二枚の時を考えましょう。カードに書かれている数字が以下の通りだと仮定します。</p>
                        <table>
                                <tr>
                                    <th></th>
                                    <th>1枚目</th>
                                    <th>2枚目</th>
                                </tr>
                                <tr>
                                    <th>表</th>
                                    <td>1</td>
                                    <td>5</td>
                                </tr>
                                <tr>
                                    <th>裏</th>
                                    <td>3</td>
                                    <td>1</td>
                                </tr>
                        </table>
                        <p>このとき、例えば1枚目がそのままならば、2枚目はひっくり返すことができません。1枚目がをひっくり返したならば(1枚目の表が3ならば)、2枚目はそのままでもひっくり返しても条件をみたします。したがって、この場合では3通りが答えになります。</p>
                        <p>次に3枚の場合について考えてみましょう。状況は次のとおりです。</p>
                        <table>
                                <tr>
                                    <th></th>
                                    <th>1枚目</th>
                                    <th>2枚目</th>
                                    <th>3枚目</th>
                                </tr>
                                <tr>
                                    <th>表</th>
                                    <td>1</td>
                                    <td>5</td>
                                    <td>9</td>
                                </tr>
                                <tr>
                                    <th>裏</th>
                                    <td>3</td>
                                    <td>1</td>
                                    <td>6</td>
                                </tr>
                        </table>
                        <p>先程の場合よりも少し複雑になりました。さて、何が複雑になったのでしょうか？それは、カードに挟まれているカードが出てきたことです。</p>
                        <p>例えば1枚目と3枚目を先に決定したとき、2枚目のカードの表裏を決定するには、両サイドのカードのことを考慮しなくていはいけません。しかしそれは題意を満たすようにカードの表裏を決定するのに<em>必須ではありません。</em>そこで、考えるべきことを減らすために、どちらか<em>片方から</em>カードの表裏を決めていくことを考えます。こうすれば、あるカードの表裏を決めるために注目するカードが常に多くて一枚になり、比較的楽に探索ができるようになります。(このアイディアが非常に重要です！注目するものを減らすというのは様々な問題解決に必要です。)</p>
                        <p>まずはカードの表裏を全通り樹形図で列挙してみましょう。3枚なら比較的楽です。</p>
                        <img src="" alt="カードの全探索">
                        <p>ここで、ある事実に着目します。<em>「i枚目のカードの表裏は、i-1枚目以前のカードに依存しない」</em>言い換えると、それまでにどのような変遷を経てi-1枚目の表(または裏)にたどり着いたとしても、i枚目の表裏を決定することができるのは、i-1枚目がどうなっているかだけに依存する。です。</p>
            </div> <!-- ここまでが記事本編 -->
        </div>
            <footer>
                <p class="copyright"><small>&copy; 2023 InTheDayDream</small></p>
            </footer>
    </body>
</html>
